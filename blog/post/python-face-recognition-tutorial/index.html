<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon" href="/static/img/favicon.ico">
        <link rel="icon" type="image/png" href="/static/img/favicon-384x384.png" sizes="384x384">
        <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png"><meta name="theme-color" content="#343a40"><link rel="canonical" href="https://nitratine.net/blog/post/python-face-recognition-tutorial/">
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for nitratine.net" href="/rss.xml">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="/static/css/base.css"><!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117153268-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-117153268-2');
        </script><!-- instant.page -->
        <script defer src="https://instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>

        

<title>Python Face Recognition Tutorial - Nitratine</title>
<link rel="stylesheet" href="/static/css/pygments.css">

<meta name="description" content="In this tutorial, I explain the setup and usage of the Python face_recognition library. This library can be used to detect faces using Python and identify facial features.">
<meta name="author" content="Brent Vollebregt">
<meta property="og:title" content="Python Face Recognition Tutorial">
<meta property="og:description" content="In this tutorial, I explain the setup and usage of the Python face_recognition library. This library can be used to detect faces using Python and identify facial features.">
<meta property="og:image" content="/posts/python-face-recognition-tutorial/single-person-red-box.png">
<meta property="og:url" content="https://nitratine.net/blog/post/python-face-recognition-tutorial/">
<meta name="twitter:card" content="summary"><script data-ad-client="ca-pub-6407227183932047" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<link rel="stylesheet" href="/static/css/blog.css">

    </head>

    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <img src="/static/img/logo.png" width="145" height="30" class="d-inline-block align-top" alt="Brand Icon">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between" id="navbar">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item ">
                            <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/about/">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main role="main" class="container my-4">

            
 <div class="row">

    <div class="col-blog-content blog-main">
        
<h1 class="blog-post-title">Python Face Recognition Tutorial</h1>
<div class="mb-2">
    <a href="/blog/archive/#2020" class="text-muted">1 Sep 2020</a>
    <a href="/blog/categories/#Tutorials" class="badge badge-primary ml-2">Tutorials</a>
    
    <a href="/blog/tags/#python" class="badge badge-warning">python</a>
    
    <a href="/blog/tags/#facial-recognition" class="badge badge-warning">facial-recognition</a>
    
    <a href="/blog/tags/#pil" class="badge badge-warning">pil</a>
    
    <img src="https://hitcounternitratine.pythonanywhere.com/count/tag.svg?url=https%3A%2F%2Fnitratine.net%2Fblog%2Fpost%2Fpython-face-recognition-tutorial%2F" alt="Hits" class="post-hits">
</div>
<p class="lead">In this tutorial, I explain the setup and usage of the Python face_recognition library. This library can be used to detect faces using Python and identify facial features.</p>
<hr class="mt-3 mb-0">



<div class="post-content mt-3">
    <div class="toc">
<ul>
<li><a href="#the-goal">The Goal</a></li>
<li><a href="#installing-the-face_recognition-library">Installing The "face_recognition" Library</a><ul>
<li><a href="#prerequisites-windows">Prerequisites (Windows)</a><ul>
<li><a href="#cmake">CMake</a></li>
<li><a href="#visual-studio-c-build-tools">Visual Studio C++ Build Tools</a></li>
</ul>
</li>
<li><a href="#installing-face_recognition-and-verifying-the-installation">Installing face_recognition and Verifying The Installation</a></li>
<li><a href="#installing-pil">Installing PIL</a></li>
</ul>
</li>
<li><a href="#detecting-a-face-in-an-image">Detecting A Face In An Image</a><ul>
<li><a href="#identifying-the-detected-face">Identifying The Detected Face</a></li>
<li><a href="#cropping-out-the-detected-face">Cropping Out The Detected Face</a></li>
<li><a href="#final-code-for-this-section">Final Code For This Section</a></li>
</ul>
</li>
<li><a href="#detecting-multiple-faces-in-an-image">Detecting Multiple Faces In An Image</a><ul>
<li><a href="#identifying-the-detected-faces">Identifying The Detected Faces</a></li>
<li><a href="#cropping-out-the-detected-faces">Cropping Out The Detected Faces</a></li>
<li><a href="#final-code-for-this-section_1">Final Code For This Section</a></li>
</ul>
</li>
<li><a href="#identifying-facial-features">Identifying Facial Features</a><ul>
<li><a href="#final-code-for-this-section_2">Final Code For This Section</a></li>
</ul>
</li>
<li><a href="#matching-detected-faces">Matching Detected Faces</a><ul>
<li><a href="#getting-face-encodings">Getting Face Encodings</a></li>
<li><a href="#checking-for-matches">Checking For Matches</a></li>
<li><a href="#final-code-for-this-section_3">Final Code For This Section</a></li>
</ul>
</li>
<li><a href="#additional-pil-help">Additional PIL Help</a></li>
</ul>
</div>
<h2 id="the-goal">
<span style="position:relative"><a class="anchor" href="#the-goal"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>The Goal</span></h2>
<p>In this tutorial, I'll go over some example usages of the Python face_recognition library to:</p>
<ul>
<li>Detect faces in images</li>
<li>Detect facial features on a detected face (like eyebrows and nose)</li>
<li>Check for matches of detected faces</li>
</ul>
<p>All images and code snippets are provided on this post along with step-by-step instructions and explanations as to what is going on. This tutorial is aimed towards Windows 10 but Linux and macOS users will most likely find this easier as they can skip some of the prerequisites.</p>
<p>Here are some relevant links for face_recognition if you need/want them:</p>
<ul>
<li>Documentation: <a href="https://face-recognition.readthedocs.io/en/latest/index.html">face-recognition.readthedocs.io</a></li>
<li>Source code: <a href="https://github.com/ageitgey/face_recognition">github.com/ageitgey/face_recognition</a></li>
<li>PyPI: <a href="https://pypi.org/project/face-recognition/">pypi.org/project/face-recognition</a></li>
</ul>
<h2 id="installing-the-face_recognition-library">
<span style="position:relative"><a class="anchor" href="#installing-the-face_recognition-library"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installing The "face_recognition" Library</span></h2>
<h3 id="prerequisites-windows">
<span style="position:relative"><a class="anchor" href="#prerequisites-windows"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Prerequisites (Windows)</span></h3>
<p>To install the face_recognition library on Windows you will need the following installed:</p>
<ul>
<li><a href="https://pypi.org/project/cmake/">CMake</a></li>
<li>Visual Studio C++ build tools</li>
</ul>
<p>If you do not have these, you will get errors like,</p>
<div class="codehilite"><pre><span></span><code>CMake must be installed to build the following extensions: _dlib_pybind11
</code></pre></div>

<p>Which is telling you that CMake isn't installed, or,</p>
<div class="codehilite"><pre><span></span><code>You must use Visual Studio to build a python extension on windows.  If you
are getting this error it means you have not installed Visual C++.  Note
that there are many flavours of Visual Studio, like Visual Studio for C#
development.  You need to install Visual Studio for C++.
</code></pre></div>

<p>Which is telling you that you need Visual Studio C++ build tools.</p>
<h4 id="cmake">
<span style="position:relative"><a class="anchor" href="#cmake"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>CMake</span></h4>
<p>To install CMake, go to <a href="https://cmake.org/download/">cmake.org/download/</a> and download the appropriate installer for your machine. I am using 64bit Windows 10 so I will get <code>cmake-&lt;version&gt;-win64-x64.msi</code>. After downloading the setup file, install it.</p>
<p>While installing CMake, add CMake to the system PATH environment variable for all users or the current user so it can be found easily.</p>
<p><img alt="CMake PATH Option" src="/posts/python-face-recognition-tutorial/cmake-path-option.png" /></p>
<p>After the installation is complete, open a terminal and execute <code>cmake</code>. This should show the usage for CMake. If it did not, make sure you selected the option to add it to the PATH environment variable.</p>
<blockquote>
<p>You will need to close and re-open your terminal/application for the PATH variable to update so the <code>cmake</code> binary can be identified.</p>
</blockquote>
<h4 id="visual-studio-c-build-tools">
<span style="position:relative"><a class="anchor" href="#visual-studio-c-build-tools"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Visual Studio C++ Build Tools</span></h4>
<p>Unlike Linux, C++ compilers for Windows are not included by default in the OS. If we visit the WindowsCompilers page on the Python wiki we can see there is <a href="https://wiki.python.org/moin/WindowsCompilers#Microsoft_Visual_C.2B-.2B-_14.2_standalone:_Build_Tools_for_Visual_Studio_2019_.28x86.2C_x64.2C_ARM.2C_ARM64.29">information on getting a standalone version of Visual C++ 14.2 compiler without the need for Visual Studio</a>. If we visit the <a href="https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2019">link</a> from that wiki section, we will be brought to a Microsoft download page. On this download page, you will want to download "Build Tools for Visual Studio 2019".</p>
<p>When <code>vs_buildtools__&lt;some other stuff&gt;.exe</code> has downloaded, run the exe and allow it to install a few things before we get to the screen below. When you get to this screen, make the selections I have:</p>
<p><img alt="Visual Studio Build Tools Install" src="/posts/python-face-recognition-tutorial/visual-studio-build-tools-install.png" /></p>
<p>After clicking "Install", wait for the installation to complete and restart.</p>
<p>Now that CMake and the required build tools are installed, we can then continue to installing the face_recognition library.</p>
<h3 id="installing-face_recognition-and-verifying-the-installation">
<span style="position:relative"><a class="anchor" href="#installing-face_recognition-and-verifying-the-installation"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installing face_recognition and Verifying The Installation</span></h3>
<p>To install the face_recognition library, execute the following in a terminal:</p>
<div class="codehilite"><pre><span></span><code>python -m pip install face-recognition
</code></pre></div>

<p>This might take a bit longer to install than usual as dlib needs to be built using the tools installed from above. To validate that the library was installed successfully, try to import the library in Python using the following:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
</code></pre></div>

<p>No errors should be raised.</p>
<h3 id="installing-pil">
<span style="position:relative"><a class="anchor" href="#installing-pil"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installing PIL</span></h3>
<p>For this tutorial, we will also be using <a href="https://pillow.readthedocs.io/en/stable/">Pillow</a> / PIL which will help us crop and draw on images. This is not required to use the face_recognition library but will be required in this tutorial to prove/show results. To install it, execute the following:</p>
<div class="codehilite"><pre><span></span><code>python -m pip install Pillow
</code></pre></div>

<p>To validate the library was installed, try to import PIL in Python using the following:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">PIL</span>
</code></pre></div>

<p>No errors should be raised.</p>
<h2 id="detecting-a-face-in-an-image">
<span style="position:relative"><a class="anchor" href="#detecting-a-face-in-an-image"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Detecting A Face In An Image</span></h2>
<p>Now that we have set the face_recognition library and PIL up, we can now start detecting faces. To start off, we will detect a face in an image with just one person.</p>
<p><img alt="Single Person" src="/posts/python-face-recognition-tutorial/single-person.jpg" /></p>
<p><a href="/posts/python-face-recognition-tutorial/single-person.jpg">single-person.jpg</a></p>
<p>First, we want to import face_recognition and some helpers from PIL.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>
</code></pre></div>

<p>Now load your image using <a href="https://face-recognition.readthedocs.io/en/latest/face_recognition.html#face_recognition.api.load_image_file"><code>face_recognition.load_image_file</code></a>.</p>
<div class="codehilite"><pre><span></span><code><span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s1">&#39;single-person.jpg&#39;</span><span class="p">)</span>
</code></pre></div>

<p><code>image</code> now contains our image in a format that face_recognition can detect faces with. To identify the location of the face in this image, call <a href="https://face-recognition.readthedocs.io/en/latest/face_recognition.html#face_recognition.api.face_locations"><code>face_recognition.face_locations</code></a> and pass the image.</p>
<div class="codehilite"><pre><span></span><code><span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</code></pre></div>

<p><code>face_locations</code> will now contain a list of face locations. Each face location is a tuple of pixel positions for <code>(top, right, bottom, left)</code> - we need to remember this for when we use it later.</p>
<p>Since there is only one face in this image, we would expect there to be only one item in this list. To check how many faces were detected, we can get the length of the list.</p>
<div class="codehilite"><pre><span></span><code><span class="n">amount</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">face_locations</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;There are </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s1"> face locations&#39;</span><span class="p">)</span>
</code></pre></div>

<p>For the example image I have provided above and am using for this tutorial, this has told me there was one face detected.</p>
<p>To get the location of this face to use later, we can then just get the first element out of the list.</p>
<div class="codehilite"><pre><span></span><code><span class="n">first_face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>

<p>To see what's in this, you can call:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">first_face_location</span><span class="p">)</span>
</code></pre></div>

<p>Which will print out something like:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">1221</span><span class="p">,</span> <span class="mi">862</span><span class="p">,</span> <span class="mi">759</span><span class="p">)</span>
</code></pre></div>

<p>These are the pixel positions for <code>(top, right, bottom, left)</code> which we will use to create a box and crop with soon.</p>
<h3 id="identifying-the-detected-face">
<span style="position:relative"><a class="anchor" href="#identifying-the-detected-face"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Identifying The Detected Face</span></h3>
<p>To identify where the face is that was detected in the image, we will draw a red box on the bounds that were returned by <code>face_recognition.face_locations</code>.</p>
<p>First, we need to create a PIL image from the image that was loaded using <code>face_recognition.load_image_file</code>. Doing this will allow us to use features offered by PIL.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Now that we have the PIL image, we need to create an object to help us draw on the image. Before we do this, we will also copy the image into a new object so that when we crop the face out later there won't be a red box still around it.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_with_red_box</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">img_with_red_box_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img_with_red_box</span><span class="p">)</span>
</code></pre></div>

<p>Now that we have an object to help us draw on the image, we will draw a rectangle using the dimensions returned earlier.</p>
<p>To draw a box, we need two points, the top left and the bottom right as x and y coordinates. Since we got back <code>(top, right, bottom, left)</code>, we need to make these <code>(left, top), (right, bottom)</code>; the basic translation can be seen below.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_with_red_box_draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="n">first_face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">first_face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="p">(</span><span class="n">first_face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">first_face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="n">outline</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">3</span>
<span class="p">)</span>
</code></pre></div>

<blockquote>
<p>We needed <code>(left, top), (right, bottom)</code> to get (x, y) (x, y) points.</p>
</blockquote>
<p>In that step we have also set <code>outline="red"</code> to make the box red and <code>width=3</code> to make the box 3 pixels wide.</p>
<p>To see the final result, we call:</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_with_red_box</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>This will open the image in the default image viewer. The image should look like this:</p>
<p><img alt="Single Person With Red Box" src="/posts/python-face-recognition-tutorial/single-person-red-box.png" /></p>
<h3 id="cropping-out-the-detected-face">
<span style="position:relative"><a class="anchor" href="#cropping-out-the-detected-face"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Cropping Out The Detected Face</span></h3>
<p>Aside from drawing a box, we can also crop out the face into another image.</p>
<p>Using the original image that we didn't draw on (because we drew on the copied image), we can call <code>img.crop</code> providing the dimensions from before.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_cropped</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>  <span class="c1"># Left x</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># Top y</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="c1"># Right x</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>   <span class="c1"># Bottom y</span>
<span class="p">))</span>
</code></pre></div>

<blockquote>
<p><code>img.crop</code> returns a copy of the original image being copped so you do not need to copy before-hand if you want to do something else with the original image.</p>
</blockquote>
<p><code>img_cropped</code> now contains a new cropped image, to display it, we can call <code>.show()</code> again.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_cropped</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p><img alt="Single Person Cropped" src="/posts/python-face-recognition-tutorial/single-person-cropped.png" /></p>
<h3 id="final-code-for-this-section">
<span style="position:relative"><a class="anchor" href="#final-code-for-this-section"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Code For This Section</span></h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>

<span class="c1"># Detecting the faces</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s1">&#39;single-person.jpg&#39;</span><span class="p">)</span>  <span class="c1"># Load the image</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>  <span class="c1"># Detect the face locations</span>
<span class="n">first_face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get the first face</span>

<span class="c1"># Convert the face_recognition image to a PIL image</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>

<span class="c1"># Creating the image with red box</span>
<span class="n">img_with_red_box</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Create a copy of the original image so there is not red box in the cropped image later</span>
<span class="n">img_with_red_box_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img_with_red_box</span><span class="p">)</span>  <span class="c1"># Create an image to draw with</span>
<span class="n">img_with_red_box_draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>  <span class="c1"># Draw the rectangle on the image</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="n">first_face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">first_face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>  <span class="c1"># (left, top)</span>
        <span class="p">(</span><span class="n">first_face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">first_face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># (right, bottom)</span>
    <span class="p">],</span>
    <span class="n">outline</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>  <span class="c1"># Make the box red</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">3</span>  <span class="c1"># Make the box 3px in thickness</span>
<span class="p">)</span>
<span class="n">img_with_red_box</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Open the image in the default image viewer</span>

<span class="c1"># Creating the cropped image</span>
<span class="n">img_cropped</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span>  <span class="c1"># Crop the original image</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">first_face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">))</span>
<span class="n">img_cropped</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Open the image in the default image viewer</span>
</code></pre></div>

<h2 id="detecting-multiple-faces-in-an-image">
<span style="position:relative"><a class="anchor" href="#detecting-multiple-faces-in-an-image"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Detecting Multiple Faces In An Image</span></h2>
<p>We saw before that <code>face_recognition.face_locations</code> returns an array of tuples corresponding with the locations of faces. This means we can use the same methods above, but loop over the result of <code>face_recognition.face_locations</code> when drawing and cropping.</p>
<p>I will use the following as my image. It has 5 faces visible, 2 of which are slightly blurred.</p>
<p><img alt="Group of People" src="/posts/python-face-recognition-tutorial/group-of-people.jpg" /></p>
<p><a href="/posts/python-face-recognition-tutorial/group-of-people.jpg">group-of-people.jpg</a></p>
<p>Once again, we want to import face_recognition and some helpers from PIL.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>
</code></pre></div>

<p>Then load the new image using <code>face_recognition.load_image_file</code> and detect the faces using the same methods as before.</p>
<div class="codehilite"><pre><span></span><code><span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s1">&#39;group-of-people.jpg&#39;</span><span class="p">)</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</code></pre></div>

<p>If we print out face_locations (<code>print(face_locations)</code>), we can see that 5 faces have been detected.</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span>
    <span class="p">(</span><span class="mi">511</span><span class="p">,</span> <span class="mi">1096</span><span class="p">,</span> <span class="mi">666</span><span class="p">,</span> <span class="mi">941</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">526</span><span class="p">,</span> <span class="mi">368</span><span class="p">,</span> <span class="mi">655</span><span class="p">,</span> <span class="mi">239</span><span class="p">)</span>
    <span class="p">(</span><span class="mi">283</span><span class="p">,</span> <span class="mi">1262</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">1154</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">168</span><span class="p">,</span> <span class="mi">1744</span><span class="p">,</span> <span class="mi">297</span><span class="p">,</span> <span class="mi">1615</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">271</span><span class="p">,</span> <span class="mi">390</span><span class="p">,</span> <span class="mi">378</span><span class="p">,</span> <span class="mi">282</span><span class="p">)</span>
<span class="p">]</span>
</code></pre></div>

<p>Since we now have more than one face, taking the first one does not make sense - we should loop over them all and perform our operations in the loop.</p>
<p>Before we continue, we should also create the PIL image we will be working with.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
</code></pre></div>

<h3 id="identifying-the-detected-faces">
<span style="position:relative"><a class="anchor" href="#identifying-the-detected-faces"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Identifying The Detected Faces</span></h3>
<p>Like before, we need to copy the original image for later (optional) and create an object to help us draw.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_with_red_box</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">img_with_red_box_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img_with_red_box</span><span class="p">)</span>
</code></pre></div>

<p>Now we can loop all the faces and create rectangles.</p>
<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">face_location</span> <span class="ow">in</span> <span class="n">face_locations</span><span class="p">:</span>
    <span class="n">img_with_red_box_draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="n">face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">(</span><span class="n">face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="p">],</span>
        <span class="n">outline</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">3</span>
    <span class="p">)</span>
</code></pre></div>

<p>And once again, look at the image:</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_with_red_box</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p><img alt="Group of People With Red Boxes" src="/posts/python-face-recognition-tutorial/group-of-people-red-boxes.jpg" /></p>
<p>Not bad eh!</p>
<h3 id="cropping-out-the-detected-faces">
<span style="position:relative"><a class="anchor" href="#cropping-out-the-detected-faces"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Cropping Out The Detected Faces</span></h3>
<p>Just like drawing many boxes, we can also crop all the detected faces. Use a for-loop again, crop the image in each loop and then showing the image.</p>
<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">face_location</span> <span class="ow">in</span> <span class="n">face_locations</span><span class="p">:</span>
    <span class="n">img_cropped</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="n">face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
    <span class="n">img_cropped</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p>You will have many images open on your machine in separate windows; here they are all together:</p>
<div style="text-align: center; margin-bottom: 1rem">
    <img style="display: inline" alt="Group of People Cropped Face 1" src="/posts/python-face-recognition-tutorial/group-of-people-cropped-face-1.jpg" />
    <img style="display: inline" alt="Group of People Cropped Face 2" src="/posts/python-face-recognition-tutorial/group-of-people-cropped-face-2.jpg" />
    <img style="display: inline" alt="Group of People Cropped Face 3" src="/posts/python-face-recognition-tutorial/group-of-people-cropped-face-3.jpg" />
    <img style="display: inline" alt="Group of People Cropped Face 4" src="/posts/python-face-recognition-tutorial/group-of-people-cropped-face-4.jpg" />
    <img style="display: inline" alt="Group of People Cropped Face 5" src="/posts/python-face-recognition-tutorial/group-of-people-cropped-face-5.jpg" />
</div>

<blockquote>
<p>I have downscaled these images for the tutorial but yours will be cropped at whatever resolution you put in.</p>
</blockquote>
<h3 id="final-code-for-this-section_1">
<span style="position:relative"><a class="anchor" href="#final-code-for-this-section_1"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Code For This Section</span></h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>

<span class="c1"># Load image and detect faces</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;group-of-people.jpg&quot;</span><span class="p">)</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Create the PIL image to copy and crop</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>

<span class="n">img_with_red_box</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Make a single copy for all the red boxes</span>
<span class="n">img_with_red_box_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img_with_red_box</span><span class="p">)</span>  <span class="c1"># Get our drawing object again</span>
<span class="k">for</span> <span class="n">face_location</span> <span class="ow">in</span> <span class="n">face_locations</span><span class="p">:</span>  <span class="c1"># Loop over all the faces detected this time</span>
    <span class="n">img_with_red_box_draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>  <span class="c1"># Draw a rectangle for the current face</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="n">face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="p">(</span><span class="n">face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="p">],</span>
        <span class="n">outline</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">3</span>
    <span class="p">)</span>
<span class="n">img_with_red_box</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Open the image in the default image viewer</span>

<span class="k">for</span> <span class="n">face_location</span> <span class="ow">in</span> <span class="n">face_locations</span><span class="p">:</span>  <span class="c1"># Loop over all the faces detected</span>
    <span class="n">img_cropped</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span>  <span class="c1"># Crop the current image like we did last time</span>
        <span class="n">face_location</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">face_location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">face_location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">face_location</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="p">))</span>
    <span class="n">img_cropped</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Show the image for the current iteration</span>
</code></pre></div>

<h2 id="identifying-facial-features">
<span style="position:relative"><a class="anchor" href="#identifying-facial-features"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Identifying Facial Features</span></h2>
<p>face_recognition also has a function <a href="https://face-recognition.readthedocs.io/en/latest/face_recognition.html#face_recognition.api.face_landmarks"><code>face_recognition.face_landmarks</code></a> which works like <code>face_recognition.face_locations</code> but will return a list of dictionaries containing face feature positions rather than the positions of the detected faces themselves.</p>
<p>Going back to the image with one person in it, we can import everything again, load the image and call <code>face_recognition.face_landmarks</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s1">&#39;single-person.jpg&#39;</span><span class="p">)</span>
<span class="n">face_landmarks_list</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_landmarks</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>  <span class="c1"># The new call</span>
</code></pre></div>

<p>Now if we print <code>face_landmarks_list</code>, the object will look a bit different.</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;chin&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">315</span><span class="p">,</span> <span class="mi">223</span><span class="p">),</span> <span class="p">(</span><span class="mi">318</span><span class="p">,</span> <span class="mi">248</span><span class="p">),</span> <span class="p">(</span><span class="mi">321</span><span class="p">,</span> <span class="mi">273</span><span class="p">),</span> <span class="p">(</span><span class="mi">326</span><span class="p">,</span> <span class="mi">296</span><span class="p">),</span> <span class="p">(</span><span class="mi">335</span><span class="p">,</span> <span class="mi">319</span><span class="p">),</span> <span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">339</span><span class="p">),</span> <span class="p">(</span><span class="mi">370</span><span class="p">,</span> <span class="mi">354</span><span class="p">),</span> <span class="p">(</span><span class="mi">392</span><span class="p">,</span> <span class="mi">365</span><span class="p">),</span> <span class="p">(</span><span class="mi">415</span><span class="p">,</span> <span class="mi">367</span><span class="p">),</span> <span class="p">(</span><span class="mi">436</span><span class="p">,</span> <span class="mi">363</span><span class="p">),</span> <span class="p">(</span><span class="mi">455</span><span class="p">,</span> <span class="mi">351</span><span class="p">),</span> <span class="p">(</span><span class="mi">469</span><span class="p">,</span> <span class="mi">336</span><span class="p">),</span> <span class="p">(</span><span class="mi">479</span><span class="p">,</span> <span class="mi">318</span><span class="p">),</span> <span class="p">(</span><span class="mi">486</span><span class="p">,</span> <span class="mi">296</span><span class="p">),</span> <span class="p">(</span><span class="mi">488</span><span class="p">,</span> <span class="mi">273</span><span class="p">),</span> <span class="p">(</span><span class="mi">490</span><span class="p">,</span> <span class="mi">251</span><span class="p">),</span> <span class="p">(</span><span class="mi">489</span><span class="p">,</span> <span class="mi">229</span><span class="p">)],</span>
        <span class="s1">&#39;left_eyebrow&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">329</span><span class="p">,</span> <span class="mi">194</span><span class="p">),</span> <span class="p">(</span><span class="mi">341</span><span class="p">,</span> <span class="mi">183</span><span class="p">),</span> <span class="p">(</span><span class="mi">358</span><span class="p">,</span> <span class="mi">180</span><span class="p">),</span> <span class="p">(</span><span class="mi">375</span><span class="p">,</span> <span class="mi">182</span><span class="p">),</span> <span class="p">(</span><span class="mi">391</span><span class="p">,</span> <span class="mi">189</span><span class="p">)],</span>
        <span class="s1">&#39;right_eyebrow&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">434</span><span class="p">,</span> <span class="mi">189</span><span class="p">),</span> <span class="p">(</span><span class="mi">448</span><span class="p">,</span> <span class="mi">184</span><span class="p">),</span> <span class="p">(</span><span class="mi">461</span><span class="p">,</span> <span class="mi">182</span><span class="p">),</span> <span class="p">(</span><span class="mi">474</span><span class="p">,</span> <span class="mi">184</span><span class="p">),</span> <span class="p">(</span><span class="mi">483</span><span class="p">,</span> <span class="mi">194</span><span class="p">)],</span>
        <span class="s1">&#39;nose_bridge&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">209</span><span class="p">),</span> <span class="p">(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">223</span><span class="p">),</span> <span class="p">(</span><span class="mi">412</span><span class="p">,</span> <span class="mi">238</span><span class="p">),</span> <span class="p">(</span><span class="mi">412</span><span class="p">,</span> <span class="mi">253</span><span class="p">)],</span>
        <span class="s1">&#39;nose_tip&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">394</span><span class="p">,</span> <span class="mi">269</span><span class="p">),</span> <span class="p">(</span><span class="mi">403</span><span class="p">,</span> <span class="mi">272</span><span class="p">),</span> <span class="p">(</span><span class="mi">412</span><span class="p">,</span> <span class="mi">275</span><span class="p">),</span> <span class="p">(</span><span class="mi">421</span><span class="p">,</span> <span class="mi">272</span><span class="p">),</span> <span class="p">(</span><span class="mi">428</span><span class="p">,</span> <span class="mi">269</span><span class="p">)],</span>
        <span class="s1">&#39;left_eye&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">349</span><span class="p">,</span> <span class="mi">215</span><span class="p">),</span> <span class="p">(</span><span class="mi">360</span><span class="p">,</span> <span class="mi">208</span><span class="p">),</span> <span class="p">(</span><span class="mi">373</span><span class="p">,</span> <span class="mi">207</span><span class="p">),</span> <span class="p">(</span><span class="mi">384</span><span class="p">,</span> <span class="mi">216</span><span class="p">),</span> <span class="p">(</span><span class="mi">372</span><span class="p">,</span> <span class="mi">218</span><span class="p">),</span> <span class="p">(</span><span class="mi">359</span><span class="p">,</span> <span class="mi">219</span><span class="p">)],</span>
        <span class="s1">&#39;right_eye&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">436</span><span class="p">,</span> <span class="mi">216</span><span class="p">),</span> <span class="p">(</span><span class="mi">446</span><span class="p">,</span> <span class="mi">208</span><span class="p">),</span> <span class="p">(</span><span class="mi">458</span><span class="p">,</span> <span class="mi">208</span><span class="p">),</span> <span class="p">(</span><span class="mi">467</span><span class="p">,</span> <span class="mi">216</span><span class="p">),</span> <span class="p">(</span><span class="mi">459</span><span class="p">,</span> <span class="mi">219</span><span class="p">),</span> <span class="p">(</span><span class="mi">447</span><span class="p">,</span> <span class="mi">219</span><span class="p">)],</span>
        <span class="s1">&#39;top_lip&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">374</span><span class="p">,</span> <span class="mi">309</span><span class="p">),</span> <span class="p">(</span><span class="mi">388</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span> <span class="p">(</span><span class="mi">402</span><span class="p">,</span> <span class="mi">296</span><span class="p">),</span> <span class="p">(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">298</span><span class="p">),</span> <span class="p">(</span><span class="mi">420</span><span class="p">,</span> <span class="mi">296</span><span class="p">),</span> <span class="p">(</span><span class="mi">434</span><span class="p">,</span> <span class="mi">301</span><span class="p">),</span> <span class="p">(</span><span class="mi">448</span><span class="p">,</span> <span class="mi">308</span><span class="p">),</span> <span class="p">(</span><span class="mi">442</span><span class="p">,</span> <span class="mi">308</span><span class="p">),</span> <span class="p">(</span><span class="mi">420</span><span class="p">,</span> <span class="mi">307</span><span class="p">),</span> <span class="p">(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">308</span><span class="p">),</span> <span class="p">(</span><span class="mi">402</span><span class="p">,</span> <span class="mi">307</span><span class="p">),</span> <span class="p">(</span><span class="mi">380</span><span class="p">,</span> <span class="mi">309</span><span class="p">)],</span>
        <span class="s1">&#39;bottom_lip&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">448</span><span class="p">,</span> <span class="mi">308</span><span class="p">),</span> <span class="p">(</span><span class="mi">434</span><span class="p">,</span> <span class="mi">317</span><span class="p">),</span> <span class="p">(</span><span class="mi">421</span><span class="p">,</span> <span class="mi">321</span><span class="p">),</span> <span class="p">(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">322</span><span class="p">),</span> <span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="mi">321</span><span class="p">),</span> <span class="p">(</span><span class="mi">388</span><span class="p">,</span> <span class="mi">317</span><span class="p">),</span> <span class="p">(</span><span class="mi">374</span><span class="p">,</span> <span class="mi">309</span><span class="p">),</span> <span class="p">(</span><span class="mi">380</span><span class="p">,</span> <span class="mi">309</span><span class="p">),</span> <span class="p">(</span><span class="mi">402</span><span class="p">,</span> <span class="mi">309</span><span class="p">),</span> <span class="p">(</span><span class="mi">411</span><span class="p">,</span> <span class="mi">310</span><span class="p">),</span> <span class="p">(</span><span class="mi">421</span><span class="p">,</span> <span class="mi">309</span><span class="p">),</span> <span class="p">(</span><span class="mi">442</span><span class="p">,</span> <span class="mi">308</span><span class="p">)]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre></div>

<p>There is quite a bit of stuff here. For each facial feature (i.e. chin, left eyebrow, right eyebrow, etc), a corresponding list contains x and y tuples - these x and y points are x and y coordinates on the image.</p>
<p>PIL offers a <code>.line()</code> method on the drawing object we have been uses which takes a list of x and y points which is perfect for this situation. To start we will need a drawing object.</p>
<div class="codehilite"><pre><span></span><code><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>  <span class="c1"># Make a PIL image from the loaded image</span>
<span class="n">img_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>  <span class="c1"># Create the draw object</span>
</code></pre></div>

<blockquote>
<p>In this example we will not copy the image as this is the only time we will be using it</p>
</blockquote>
<p>Now that we have the object to help us draw, plot all these lines using the first dictionary in the list returned above.</p>
<div class="codehilite"><pre><span></span><code><span class="n">face_landmarks</span> <span class="o">=</span> <span class="n">face_landmarks_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get the first dictionary of features</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;chin&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;left_eyebrow&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;right_eyebrow&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;nose_bridge&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;nose_tip&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;left_eye&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;right_eye&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;top_lip&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;bottom_lip&#39;</span><span class="p">])</span>
</code></pre></div>

<p>Now we can call <code>.show()</code> on our image to look at it:</p>
<div class="codehilite"><pre><span></span><code><span class="n">img_draw</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p><img alt="Single Person With Facial Markings" src="/posts/python-face-recognition-tutorial/single-person-facial-markings.png" /></p>
<h3 id="final-code-for-this-section_2">
<span style="position:relative"><a class="anchor" href="#final-code-for-this-section_2"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Code For This Section</span></h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>

<span class="c1"># Load the image and detect face landmarks for each face within</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s1">&#39;single-person.jpg&#39;</span><span class="p">)</span>
<span class="n">face_landmarks_list</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_landmarks</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Make a PIL image from the loaded image and then get a drawing object</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
<span class="n">img_draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="c1"># Draw all the features for the first face</span>
<span class="n">face_landmarks</span> <span class="o">=</span> <span class="n">face_landmarks_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get the first object corresponding to the first face</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;chin&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;left_eyebrow&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;right_eyebrow&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;nose_bridge&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;nose_tip&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;left_eye&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;right_eye&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;top_lip&#39;</span><span class="p">])</span>
<span class="n">img_draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">face_landmarks</span><span class="p">[</span><span class="s1">&#39;bottom_lip&#39;</span><span class="p">])</span>

<span class="n">img_with_face_landmarks</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Show the image for the current iteration</span>
</code></pre></div>

<h2 id="matching-detected-faces">
<span style="position:relative"><a class="anchor" href="#matching-detected-faces"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Matching Detected Faces</span></h2>
<p>The face_recognition library also provides the function <a href="https://face-recognition.readthedocs.io/en/latest/face_recognition.html#face_recognition.api.compare_faces"><code>face_recognition.compare_faces</code></a> which can be used to compare detected faces to see if they match.</p>
<p>There are two arguments for this function which we will use:</p>
<ul>
<li><code>known_face_encodings</code>: A list of known face encodings</li>
<li><code>face_encoding_to_check</code>: A single face encoding to compare against the list</li>
</ul>
<p>For this section, we will be getting 2 face encodings for the same person and checking if they are in another image.</p>
<p>Here are the two images with a known face in each:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 6px; margin-bottom: 1rem">
    <!-- Duncan.Hull CC BY-SA 4.0 src: https://en.wikipedia.org/wiki/Elon_Musk#/media/File:Elon_Musk_Royal_Society.jpg -->
    <img style="display: inline" alt="Elon Musk 1" src="/posts/python-face-recognition-tutorial/elon-musk-1.jpg" />
    <!-- REUTERS/Mike Blake src: https://www.businessinsider.com.au/elon-musk-last-decade-tesla-spacex-relationships-controversies-tweets-2019-11 -->
    <img style="display: inline" alt="Elon Musk 2" src="/posts/python-face-recognition-tutorial/elon-musk-2.png" />
</div>

<p><a href="/posts/python-face-recognition-tutorial/elon-musk-1.jpg">elon-musk-1.jpg</a>
<a href="/posts/python-face-recognition-tutorial/elon-musk-2.png">elon-musk-2.png</a></p>
<p>And here are the images we will check to see if Elon is in them:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-gap: 6px; margin-bottom: 1rem">
    <!-- Alex Gallardo/Associated Press src: https://www.nytimes.com/2019/10/10/science/nasa-spacex-elon-musk.html -->
    <img style="display: inline" alt="Elon Musk Potential Match 1" src="/posts/python-face-recognition-tutorial/elon-musk-in-group.jpg" />
    <img style="display: inline" alt="Elon Musk Potential Match 2 (Group Of People)" src="/posts/python-face-recognition-tutorial/group-of-people.jpg" />
</div>

<p><a href="/posts/python-face-recognition-tutorial/elon-musk-in-group.jpg">elon-musk-in-group.jpg</a>
<a href="/posts/python-face-recognition-tutorial/group-of-people.jpg">group-of-people.jpg</a></p>
<h3 id="getting-face-encodings">
<span style="position:relative"><a class="anchor" href="#getting-face-encodings"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Getting Face Encodings</span></h3>
<p>To get known face encodings, we can use <a href="https://face-recognition.readthedocs.io/en/latest/face_recognition.html#face_recognition.api.face_encodings"><code>face_recognition.face_encodings</code></a>. This function takes an image that contains a face and the locations of faces in images to use. </p>
<blockquote>
<p>Typically you would only use one location of a face in a single image to create one encoding but if you have multiple of the same face in one image you can provide more than one location.</p>
</blockquote>
<p>The process of what we need to do to get our known face encodings is:</p>
<ol>
<li>Load in the first image</li>
<li>Detect faces in the image to get the face locations</li>
<li>Verify there is only one face and select the first face</li>
<li>Call <code>face_recognition.face_encodings</code> with the image and the one face location</li>
<li>Repeat 1 through 5 for the second image</li>
</ol>
<p>We have done steps 1-3 previously, so we can do it here again:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>

<span class="c1"># Load image and detect faces</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-1.jpg&quot;</span><span class="p">)</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</code></pre></div>

<p>And to validate one face was detected:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">face_locations</span><span class="p">))</span>  <span class="c1"># Should be 1</span>
</code></pre></div>

<p>Now we can call <code>face_recognition.face_encodings</code> and provide the image and found location.</p>
<div class="codehilite"><pre><span></span><code><span class="n">face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># We only want an encoding for the first face. There may be more than one face in images you use so I am leaving this here as a note.</span>
<span class="n">face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">[</span><span class="n">face_location</span><span class="p">])</span>
</code></pre></div>

<blockquote>
<p>The parameter <code>known_face_locations</code> is optional and face_recognition will detect all the faces in the image automatically when getting face encodings if <code>known_face_locations</code> is not supplied. For this part, I am demonstrating it this way to validate there is only one detected face in the image. </p>
</blockquote>
<p>Since we specified an array of <code>known_face_locations</code>, we know that there will be only one encoding returned so we can take the first.</p>
<div class="codehilite"><pre><span></span><code><span class="n">elon_musk_knwon_face_encoding_1</span> <span class="o">=</span> <span class="n">face_encodings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>

<p>We can now repeat this process for the other image</p>
<div class="codehilite"><pre><span></span><code><span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-2.png&quot;</span><span class="p">)</span>  <span class="c1"># Load the image</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>  <span class="c1"># Get face locations</span>
<span class="n">face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Only use the first detected face</span>

<span class="n">face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">[</span><span class="n">face_location</span><span class="p">])</span>  <span class="c1"># Get all face encodings</span>
<span class="n">elon_musk_knwon_face_encoding_2</span> <span class="o">=</span> <span class="n">face_encodings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Pull out the one returned face encoding</span>
</code></pre></div>

<p>Now that we have <code>elon_musk_knwon_face_encoding_1</code> and <code>elon_musk_knwon_face_encoding_2</code>, we can see if they exist in our other two images.</p>
<h3 id="checking-for-matches">
<span style="position:relative"><a class="anchor" href="#checking-for-matches"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Checking For Matches</span></h3>
<p>To check for matches in an image with <code>face_recognition.compare_faces</code>, we need known face encodings (which we have just gotten above) and a <em>single</em> face encoding to check.</p>
<p>Since we are working with groups of images, we will have to loop the detected faces - although this will also work the same with only one person in the image.</p>
<p>First, we need to get all face decodings out of our first image to compare. I had noted above that the second parameter, <code>known_face_locations</code>, to <code>face_recognition.face_encodings</code> was optional, leaving it out will detect all faces in the image automatically and return face encodings for every face in the image; this is exactly what we want and will remove the intermediate step of detecting faces. </p>
<div class="codehilite"><pre><span></span><code><span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-in-group.jpg&quot;</span><span class="p">)</span>  <span class="c1"># Load the image we are comparing</span>
<span class="n">unknwon_face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>  <span class="c1"># Get face encodings for everyone in the image</span>
</code></pre></div>

<p>Now that we have our unknown face encodings for all the faces in the group image, we can loop over them and check if either match:</p>
<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">unknwon_face_encoding</span> <span class="ow">in</span> <span class="n">unknwon_face_encodings</span><span class="p">:</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">compare_faces</span><span class="p">(</span>
        <span class="p">[</span><span class="n">elon_musk_knwon_face_encoding_1</span><span class="p">,</span> <span class="n">elon_musk_knwon_face_encoding_2</span><span class="p">],</span>  <span class="c1"># The known face encodings (can be only 1 - less is faster)</span>
        <span class="n">unknwon_face_encoding</span>  <span class="c1"># The single unknown face encoding</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span>
</code></pre></div>

<p>If you run this, you will see something like:</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
<span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
<span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
<span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
</code></pre></div>

<p>Each line is one comparison (stored in <code>matches</code>) and each boolean corresponds to a known face encoding and whether it matched the unknown face encoding.</p>
<p>From the values above, we can see that the first unknown face in the group image matched both known face encodings and the other three unknown faces didn't match either encoding. Using more than once face encoding can allow you to calculate a better probability but will cost you in speed. </p>
<p>If you run this on the other image, everything returns false.</p>
<h3 id="final-code-for-this-section_3">
<span style="position:relative"><a class="anchor" href="#final-code-for-this-section_3"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Code For This Section</span></h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">face_recognition</span>


<span class="c1"># Load elon-musk-1.jpg and detect faces</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-1.jpg&quot;</span><span class="p">)</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Get the single face encoding out of elon-musk-1.jpg</span>
<span class="n">face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Only use the first detected face</span>
<span class="n">face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">[</span><span class="n">face_location</span><span class="p">])</span>
<span class="n">elon_musk_knwon_face_encoding_1</span> <span class="o">=</span> <span class="n">face_encodings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Pull out the one returned face encoding</span>


<span class="c1"># Load elon-musk-2.jpg and detect faces</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-2.png&quot;</span><span class="p">)</span>
<span class="n">face_locations</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_locations</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Get the single face encoding out of elon-musk-2.jpg</span>
<span class="n">face_location</span> <span class="o">=</span> <span class="n">face_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">[</span><span class="n">face_location</span><span class="p">])</span>
<span class="n">elon_musk_knwon_face_encoding_2</span> <span class="o">=</span> <span class="n">face_encodings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<span class="c1"># Load the image with unknown to compare</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;elon-musk-in-group.jpg&quot;</span><span class="p">)</span>  <span class="c1"># Load the image we are comparing</span>
<span class="n">unknwon_face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Loop over each unknwon face encoding to see if the face matches either known encodings</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Matches for elon-musk-in-group.jpg&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">unknwon_face_encoding</span> <span class="ow">in</span> <span class="n">unknwon_face_encodings</span><span class="p">:</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">compare_faces</span><span class="p">(</span>
        <span class="p">[</span><span class="n">elon_musk_knwon_face_encoding_1</span><span class="p">,</span> <span class="n">elon_musk_knwon_face_encoding_2</span><span class="p">],</span>  <span class="c1"># The known face encodings (can be only 1 - less is faster)</span>
        <span class="n">unknwon_face_encoding</span>  <span class="c1"># The single unknown face encoding</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span>


<span class="c1"># Load the other image with unknown to compare</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">load_image_file</span><span class="p">(</span><span class="s2">&quot;group-of-people.jpg&quot;</span><span class="p">)</span>  <span class="c1"># Load the image we are comparing</span>
<span class="n">unknwon_face_encodings</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">face_encodings</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># Loop over each unknwon face encoding to see if the face matches either known encodings</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Matches for group-of-people.jpg&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">unknwon_face_encoding</span> <span class="ow">in</span> <span class="n">unknwon_face_encodings</span><span class="p">:</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">face_recognition</span><span class="o">.</span><span class="n">compare_faces</span><span class="p">(</span>
        <span class="p">[</span><span class="n">elon_musk_knwon_face_encoding_1</span><span class="p">,</span> <span class="n">elon_musk_knwon_face_encoding_2</span><span class="p">],</span>
        <span class="n">unknwon_face_encoding</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span>
</code></pre></div>

<h2 id="additional-pil-help">
<span style="position:relative"><a class="anchor" href="#additional-pil-help"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Additional PIL Help</span></h2>
<p>This tutorial doesn't focus on PIL but one function you may find useful is <a href="https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image.save"><code>img.save()</code></a>; this saves a file. An example of its usages is <code>img.save('my_image.png')</code> to save a PIL image to my_image.png.</p>
<p>You can find more on PIL in it's <a href="https://pillow.readthedocs.io/en/stable/reference/">docs</a> and there is plenty of other help online as it is a very old library.</p>
</div>

<nav class="blog-pagination text-center mb-5 mt-4">
    
        <a class="btn btn-outline-primary mt-1" href="/blog/post/how-to-serve-a-react-app-from-a-python-server/">&larr; How To Serve A React App Fr...</a>
    
    
        <a class="btn btn-outline-primary mt-1" href="/blog/post/how-to-set-up-open-drone-map-on-windows/">How To Set Up Open Drone Ma... &rarr;</a>
    
</nav>


<div id="disqus_thread"></div>
<script>
    var disqus_config = function() {
        this.page.url = 'https://nitratine.net/blog/post/python-face-recognition-tutorial/'; // Your page's canonical URL variable
        this.page.identifier = 'https://nitratine.net/blog/post/python-face-recognition-tutorial/'; // Your page's unique identifier variable
    };
    (function() {
        var d = document,
            s = d.createElement('script');
        s.src = '//nitratine.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


    </div>

    <aside class="col-blog-sidebar blog-sidebar">

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">About</span>
            <p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTutorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and tools that help fix small things.</p>
        </div>

        <div class="input-group mb-3">
            <input id="sidebar-search" type="text" class="form-control" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
                <button id="sidebar-search-submit" class="btn btn-outline-primary" type="button">Search</button>
            </div>
        </div>
        <script>let searchUrl = "/search/";</script>
        <script type="text/javascript" defer src="/static/js/search.js"></script>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Categories</span>
            <ol class="list-unstyled mb-0 text-center text-lg-left">
                
                    <li>
                    <a href="/blog/categories/#Apps">&#x1F4F1; Apps
                        <span class="badge badge-primary ml-3">2</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#General">&#x1F4F0; General
                        <span class="badge badge-primary ml-3">7</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Investigations">&#x1F50D; Investigations
                        <span class="badge badge-primary ml-3">2</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Projects">&#x1F4BE; Projects
                        <span class="badge badge-primary ml-3">15</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Snippets">&#x2702; Snippets
                        <span class="badge badge-primary ml-3">1</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Tools">&#x1F6E0; Tools
                        <span class="badge badge-primary ml-3">4</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Tutorials">&#x1F4D6; Tutorials
                        <span class="badge badge-primary ml-3">26</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#YouTube">&#x1F3A5; YouTube
                        <span class="badge badge-primary ml-3">15</span>
                    </a>
                </li>
                
            </ol>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">PyTutorials on YouTube</span>
            <script src="https://apis.google.com/js/platform.js"></script>
            <div style="text-align: center">
                <div class="g-ytsubscribe" data-channel="PrivateSplat" data-layout="full" data-count="default"></div>
            </div>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Recent Videos</span>
            <div id="recent-yt-videos" class="yt_video_container">
                
                    <img src="https://img.youtube.com/vi/H8t4DJ3Tdrg/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=H8t4DJ3Tdrg', '_blank')">
                
                    <img src="https://img.youtube.com/vi/ksW59gYEl6Q/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=ksW59gYEl6Q', '_blank')">
                
                    <img src="https://img.youtube.com/vi/YPiHBtddefI/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=YPiHBtddefI', '_blank')">
                
                    <img src="https://img.youtube.com/vi/SQj17D1Q_6s/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=SQj17D1Q_6s', '_blank')">
                
                    <img src="https://img.youtube.com/vi/2kbeBzEQfXE/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=2kbeBzEQfXE', '_blank')">
                
                    <img src="https://img.youtube.com/vi/5JSloPGocSY/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=5JSloPGocSY', '_blank')">
                
            </div>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Featured Sites</span>
            <div class="featured-sites">
                
                    <a title="Emotionify" href="https://emotionify.nitratine.net/">
                        <img src="/static/img/featured-sites/emotionify.png" alt="Emotionify" />
                    </a>
                
                    <a title="Spotify Lyrics Viewer" href="https://spotify-lyrics-viewer.nitratine.net/">
                        <img src="/static/img/featured-sites/spotify-lyrics-viewer.png" alt="Spotify Lyrics Viewer" />
                    </a>
                
                    <a title="Hit Counter" href="https://hitcounter.pythonanywhere.com/">
                        <img src="/static/img/featured-sites/hit-counter.png" alt="Hit Counter" />
                    </a>
                
                    <a title="Monopoly Money" href="https://monopoly-money.nitratine.net/">
                        <img src="/posts/monopoly-money/banner.png" alt="Monopoly Money" />
                    </a>
                
            </div>
        </div>
    </aside>

</div>


        </main>

        <footer class="bg-dark py-4 px-1">
            <div class="container">
                <div class="d-flex justify-content-center">
                    <div class="top-group">
                        <div class="link-group">
                            <p class="header">Navigate</p>
                            <a aria-current="page" class="" href="/">Home</a>
                            <a href="/blog/">Blog</a>
                            <a class="ml-2" href="/blog/categories/">Categories</a>
                            <a class="ml-2" href="/blog/tags/">Tags</a>
                            <a class="ml-2" href="/blog/archive/">Archive</a>
                            <a href="/portfolio/">Portfolio</a>
                            <a href="/about/">About</a>
                        </div>

                        <div class="link-group">
                            <p class="header">Popular Projects</p>
                            <a href="/blog/post/auto-py-to-exe/">auto-py-to-exe</a>
                            <a href="/blog/post/hit-counter/">hit-counter</a>
                            <a href="/blog/post/whos-on-my-network/">whos-on-my-network</a>
                            <a href="/blog/post/monopoly-money/">monopoly-money</a>
                        </div>

                        <div class="link-group">
                            <p class="header">Follow</p>
                            <a href="https://github.com/brentvollebregt" class="with-icon">
                                <img src="/static/img/icons/github.svg" alt="GitHub Logo" style="filter: invert(1);" />
                                GitHub
                            </a>
                            <a href="https://www.youtube.com/c/PyTutorials" class="with-icon">
                                <img src="/static/img/icons/youtube.svg" alt="YouTube Logo" />
                                YouTube
                            </a>
                            <a rel="alternate" type="application/rss+xml" href="/rss.xml" class="with-icon">
                                <img src="/static/img/icons/rss.svg" alt="RSS Logo"/>
                                Nitratine RSS Feed
                            </a>
                        </div>
                    </div>
                </div>

                <div class="mx-4">
                    <hr/>
                </div>

                <p class="text-center m-0">
                    <small>© 2021 Brent Vollebregt</small>
                </p>
            </div>
        </footer>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    </body>
</html>