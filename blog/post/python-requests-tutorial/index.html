<!DOCTYPE html><html lang="en"> <head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="shortcut icon" href="/static/img/favicon.ico"><link rel="icon" type="image/png" href="/static/img/favicon-384x384.png" sizes="384x384"><link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png"><meta name="theme-color" content="#343a40"><link rel="canonical" href="https://nitratine.net/blog/post/python-requests-tutorial/"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"><link rel="stylesheet" href="/static/css/base.css"><link rel="stylesheet" href="/static/css/custom-bootstrap.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-117153268-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);};gtag('js',new Date());gtag('config','UA-117153268-2');</script><script defer src="https://instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script><title>Python Requests Tutorial - Nitratine</title><link rel="stylesheet" href="/static/css/blog.css"><link rel="stylesheet" href="/static/css/pygments.css"><meta name="description" content="This is a basic Python requests tutorial to help you get started with sending HTTP requests in Python. This will cover all the basics that you will need and want to know when making HTTP requests in Python."><meta name="author" content="Brent Vollebregt"><meta property="og:title" content="Python Requests Tutorial"><meta property="og:description" content="This is a basic Python requests tutorial to help you get started with sending HTTP requests in Python. This will cover all the basics that you will need and want to know when making HTTP requests in Python."><meta property="og:image" content="/posts/python-requests-tutorial/feature.png"><meta property="og:url" content="https://nitratine.net/blog/post/python-requests-tutorial/"><meta name="twitter:card" content="summary"><script data-ad-client="ca-pub-6407227183932047" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head> <body> <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"> <div class="container"> <a class="navbar-brand" href="/"> <img src="/static/img/logo.png" width="145" height="30" class="d-inline-block align-top" alt="Brand Icon"> </a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <div class="collapse navbar-collapse justify-content-between" id="navbar"> <ul class="navbar-nav mr-auto"> <li class="nav-item "> <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item"> <a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a> </li> <li class="nav-item"> <a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">About</a> </li> </ul> </div> </div> </nav> <main role="main" class="container my-4"> <div class="row"> <div class="col-blog-content blog-main"> <h1 class="blog-post-title">Python Requests Tutorial</h1> <div class="mb-3"> <a href="/blog/archive/#2019" class="text-muted">04 Apr 2019</a> <a href="/blog/categories/#Tutorials" class="badge badge-primary ml-2">Tutorials</a> <a href="/blog/tags/#python" class="badge badge-warning">python</a> <a href="/blog/tags/#requests" class="badge badge-warning">requests</a> <img src="https://hitcounter.pythonanywhere.com/count/tag.svg" alt="Hits" class="post-hits"> </div> <p class="lead">This is a basic Python requests tutorial to help you get started with sending HTTP requests in Python. This will cover all the basics that you will need and want to know when making HTTP requests in Python.</p> <hr class="mt-3 mb-0"> <div class="post-content mt-3"> <div class="toc"> <ul> <li><a href="#introduction">Introduction</a></li> <li><a href="#installation">Installation</a></li> <li><a href="#making-a-simple-request">Making a Simple Request</a></li> <li><a href="#attributes-you-should-know-about">Attributes You Should Know About</a><ul> <li><a href="#json">.json()</a></li> </ul> </li> <li><a href="#downloading-an-image-and-other-files">Downloading an Image and Other Files</a></li> <li><a href="#different-methods">Different Methods</a></li> <li><a href="#parameters-in-urls">Parameters in URLs</a></li> <li><a href="#sending-data-in-http-body">Sending Data in HTTP Body</a><ul> <li><a href="#form-encoded-body">Form Encoded Body</a></li> <li><a href="#json-body">JSON Body</a></li> <li><a href="#raw-body">Raw Body</a></li> </ul> </li> <li><a href="#custom-headers">Custom headers</a></li> <li><a href="#this-is-only-the-basics">This is Only The Basics</a></li> <li><a href="#i-dont-have-s-server-how-can-i-test-these">I Don't Have s Server, How Can I Test These?</a></li> </ul> </div> <h2 id="introduction"> <span style="position:relative"><a class="anchor" href="#introduction"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Introduction</span></h2> <p>The <a href="https://github.com/requests/requests"><code>requests</code></a> Python package is an HTTP library created by <a href="https://github.com/kennethreitz">Kenneth Reitz</a>. It is a very well known package in the Python community for making HTTP requests easy to create and call. This tutorial will cover the basics that you will need to know and will want to know when making HTTP requests in Python.</p> <p>Learning how to send HTTP requests allows you to query websites and API's for data or even a webpage so you can scrape data out with something like <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">Beatifulsoup</a>.</p> <h2 id="installation"> <span style="position:relative"><a class="anchor" href="#installation"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installation</span></h2> <p>To install the requests module, first make sure you have pip setup. If not, follow my <a href="/blog/post/how-to-setup-pythons-pip/">tutorial on setting up pip</a>. After making sure pip is working, execute <code>pip install requests</code>. When this is successful, open Python IDLE and execute <code>import requests</code>; if no errors occur, the requests module has been installed successfully.</p> <h2 id="making-a-simple-request"> <span style="position:relative"><a class="anchor" href="#making-a-simple-request"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Making a Simple Request</span></h2> <p>Just like your browser does, you can request a web page using Python. Get the URL of a website and use the following code to download the content of the page.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://nitratine.net/blog/&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div> <p>When executing this, a lot of text should be printed. This is the content returned by the site requested, in the case of using the URL demonstrated above, the content will be HTML that renders my blog feed.</p> <p>In this example, I have called <code>requests.get</code> passing my URL to be fetched. This function then returns a <code>requests.models.Response</code> object. Using the <code>.text</code> attribute, I can look at the data that was returned by the URL I called.</p> <blockquote> <p>When a browser calls a web page, it initially requests the URL being visited and then calls other URLs that are referenced in the HTML document to render the page with the CSS, JS, image and other files required.</p> </blockquote> <h2 id="attributes-you-should-know-about"> <span style="position:relative"><a class="anchor" href="#attributes-you-should-know-about"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Attributes You Should Know About</span></h2> <p>The <code>Response</code> object that was returned in the example above contains many useful attributes. Here are some ones you should know about:</p> <ul> <li><code>.content</code>: The raw content of the request</li> <li><code>.text</code>: The text content of the request</li> <li><code>.status_code</code>: The status code of the response; e.g. 200 OK, 404 Not Found, 418 Short and Stout...</li> <li><code>.headers</code>: The headers of the response</li> <li><code>.cookies</code>: The cookies returned in the response. You can access cookie value like you would use a dict: <code>response.cookies['logged_in']</code>.</li> </ul> <p>To get the value of these attributes, use them as I did in the previous code example.</p> <h3 id="json"> <span style="position:relative"><a class="anchor" href="#json"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>.json()</span></h3> <p>If a site returns a JSON response, you can call <code>.json()</code> on the <code>Response</code> object to convert the JSON object in the response to a Python dictionary.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://jsonplaceholder.typicode.com/todos/1&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Title: &#39;</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
</code></pre></div> <p>This saves the effort on deserializing the .text value using the <a href="https://docs.python.org/3/library/ast.html#ast.literal_eval">ast module</a>. </p> <h2 id="downloading-an-image-and-other-files"> <span style="position:relative"><a class="anchor" href="#downloading-an-image-and-other-files"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Downloading an Image and Other Files</span></h2> <p>Just like downloading a web page, you can also download other files like images or videos. Simply find the URL of the image/other file <em>(make sure it is the URL of the file, not the URL of the page it's on)</em> and use it like before; but this time put the content into a file.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">file_destination</span> <span class="o">=</span> <span class="s1">&#39;nitratine-logo.png&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://nitratine.net/static/img/logo.png&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_destination</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="c1"># Make sure to use wb are we are writing bytes</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div> <p>If you expect the file to be large (or just want to use a stream), you can use a stream to write to the output file as you receive the data. This means as the data comes in, it is written to the output file so the data does not have to sit in memory.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">file_destination</span> <span class="o">=</span> <span class="s1">&#39;multi-clipboard.gif&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://nitratine.net/posts/multi-clipboard/multi-clipboard.gif&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_destination</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
            <span class="c1"># print(&#39;Writing chunk&#39;) # Uncomment this to show that the file is being written chunk-by-chunk when parts of the data is received</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="c1"># Write each chunk received to a file</span>
</code></pre></div> <blockquote> <p>These examples have been modified from <a href="https://stackoverflow.com/a/13137873">stackoverflow.com/a/13137873</a></p> </blockquote> <h2 id="different-methods"> <span style="position:relative"><a class="anchor" href="#different-methods"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Different Methods</span></h2> <p>When making a request to a URL/URI, different 'methods' can be used. These tell the server what sort of action you want to perform. HTTP defines actions like GET, POST, PUT, DELETE and many others.</p> <p>To use these different methods, simply replace the <code>.get</code> with <code>.post</code>/<code>.put</code>/<code>.delete</code> or whatever method you are using. For example, if I wanted to delete a record in a REST API, I could use:</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span> <span class="c1"># Check for HTTP 200 (OK)</span>
</code></pre></div> <h2 id="parameters-in-urls"> <span style="position:relative"><a class="anchor" href="#parameters-in-urls"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Parameters in URLs</span></h2> <p>Instead of constructing a URL to add parameters to it, the requests module offers a method to add them automatically for you. Simply create your key-value pairs in a Python dictionary and then pass this to the <code>params</code> argument in the request method. For example:</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;key1&#39;</span> <span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span> <span class="p">:</span> <span class="s1">&#39;value2&#39;</span> <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/get&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div> <p>To show that the parameters were added to the url, we can verify it using a PreparedRequest.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;key1&#39;</span> <span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span> <span class="p">:</span> <span class="s1">&#39;value2&#39;</span> <span class="p">}</span>
<span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span><span class="s1">&#39;https://httpbin.org/get&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
<span class="n">prepared</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span> <span class="c1"># Get a PreparedRequest object</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">prepared</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</code></pre></div> <blockquote> <p>The output of the above script is "https://httpbin.org/get?key1=value1&amp;key2=value2" as expected.</p> </blockquote> <h2 id="sending-data-in-http-body"> <span style="position:relative"><a class="anchor" href="#sending-data-in-http-body"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Sending Data in HTTP Body</span></h2> <p>When making calls to endpoints that require data in the body, we can use form-encoded, JSON or raw bodies.</p> <h3 id="form-encoded-body"> <span style="position:relative"><a class="anchor" href="#form-encoded-body"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Form Encoded Body</span></h3> <p>In cases where you want to send some form-encoded data (like a HTML form would submit), we can pass key-value pairs as we used above to the <code>data</code> parameter. The dictionary of your data will be form-encoded when the request is made. For example:</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;key1&#39;</span> <span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span> <span class="p">:</span> <span class="s1">&#39;value2&#39;</span> <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://example.com/create-something&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_data</span><span class="p">)</span>
</code></pre></div> <h3 id="json-body"> <span style="position:relative"><a class="anchor" href="#json-body"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>JSON Body</span></h3> <p>Today, JSON bodies are becoming more popular over form-encoded key-value pairs; this is due to how much more compact JSON is over XML (XML and JSON are typically used to carry larger payloads). Fortunately, JSON bodies are as easy to create in the request module as form-encoded are.</p> <p>Instead of passing your dictionary to the <code>data</code> parameter, pass it to <code>json</code>. When the request is made, the <code>Content-Type</code> header will automatically be set to <code>application/json</code> to tell the server that this is a JSON request.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">body_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;key1&#39;</span> <span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span> <span class="p">:</span> <span class="s1">&#39;value2&#39;</span> <span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://example.com/create-something&#39;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body_data</span><span class="p">)</span>
</code></pre></div> <h3 id="raw-body"> <span style="position:relative"><a class="anchor" href="#raw-body"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Raw Body</span></h3> <p>In the cases where you want to specify exactly what is in the body manually, simply provide the string to the <code>body</code> parameter. For example:</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">body_data</span> <span class="o">=</span> <span class="s2">&quot;This is my body&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://example.com/create-something&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_data</span><span class="p">)</span>
</code></pre></div> <h2 id="custom-headers"> <span style="position:relative"><a class="anchor" href="#custom-headers"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Custom headers</span></h2> <p>Previously I discussed that the <code>Content-Type</code> header will automatically be set to <code>application/json</code> when passing data to <code>json</code>. We can set headers manually is a very similar way to how we have been sending data. Once again, create the header key-value pairs in a Python dictionary and then pass them to the <code>headers</code> parameter.</p> <div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">header_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;User-Agent&#39;</span> <span class="p">:</span> <span class="s1">&#39;Python requests&#39;</span><span class="p">,</span>
    <span class="s1">&#39;X-My-Header-Key&#39;</span> <span class="p">:</span> <span class="s1">&#39;My header value&#39;</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://example.com/&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header_data</span><span class="p">)</span>
</code></pre></div> <h2 id="this-is-only-the-basics"> <span style="position:relative"><a class="anchor" href="#this-is-only-the-basics"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>This is Only The Basics</span></h2> <p>Please know that these are only the basics of the requests library and there is a lot more to offer from this library; this tutorial however, should help you understand what you need to do to request and send data.</p> <p>If you want to read up more on this library, Google is full of answers but the docs at <a href="https://requests.readthedocs.io/en/master/user/quickstart/">requests.readthedocs.io</a> is great for reference material.</p> <h2 id="i-dont-have-s-server-how-can-i-test-these"> <span style="position:relative"><a class="anchor" href="#i-dont-have-s-server-how-can-i-test-these"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>I Don't Have s Server, How Can I Test These?</span></h2> <p><a href="https://hookbin.com/">hookbin.com</a> is an amazing place to test requests. Simply create a new endpoint on the site (big pink button) and copy the URL at the top of the rendered page. Now whenever you make a request to that URL, refresh the page and you will be able to see the content of the request you made.</p> </div> <nav class="blog-pagination text-center mb-5 mt-4"> <a class="btn btn-outline-primary mt-1" href="/blog/post/python-size-and-time-cache-decorator/">&larr; Python Size and Time Cache ...</a> <a class="btn btn-outline-primary mt-1" href="/blog/post/google-publisher-toolbar-please-copy-this-code/">Google Publisher Toolbar: P... &rarr;</a> </nav> <div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url='https://nitratine.net/blog/post/python-requests-tutorial/';this.page.identifier='https://nitratine.net/blog/post/python-requests-tutorial/';};(function(){var d=document,s=d.createElement('script');s.src='//nitratine.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> <aside class="col-blog-sidebar blog-sidebar"> <div class="card p-3 mb-3 bg-light"> <h4 class="text-center text-lg-left">About</h4> <p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTutorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and tools that help fix small things.</p> </div> <div class="input-group mb-3"> <input id="search" type="text" class="form-control" placeholder="Search" aria-label="Search"> <div class="input-group-append"> <button id="search-submit" class="btn btn-outline-primary" type="button">Search</button> </div> </div> <script>let searchUrl="/search/";</script> <script type="text/javascript" defer src="/static/js/search.js"></script> <div class="card p-3 mb-3 bg-light"> <h4 class="text-center text-lg-left">Categories</h4> <ol class="list-unstyled mb-0 text-center text-lg-left"> <li> <a href="/blog/categories/#Apps">&#x1F4F1; Apps <span class="badge badge-primary ml-3">2</span> </a> </li> <li> <a href="/blog/categories/#General">&#x1F4F0; General <span class="badge badge-primary ml-3">7</span> </a> </li> <li> <a href="/blog/categories/#Investigations">&#x1F50D; Investigations <span class="badge badge-primary ml-3">2</span> </a> </li> <li> <a href="/blog/categories/#Projects">&#x1F4BE; Projects <span class="badge badge-primary ml-3">15</span> </a> </li> <li> <a href="/blog/categories/#Snippets">&#x2702; Snippets <span class="badge badge-primary ml-3">1</span> </a> </li> <li> <a href="/blog/categories/#Tools">&#x1F6E0; Tools <span class="badge badge-primary ml-3">3</span> </a> </li> <li> <a href="/blog/categories/#Tutorials">&#x1F4D6; Tutorials <span class="badge badge-primary ml-3">19</span> </a> </li> <li> <a href="/blog/categories/#YouTube">&#x1F3A5; YouTube <span class="badge badge-primary ml-3">15</span> </a> </li> </ol> </div> <div class="card p-3 mb-3 bg-light"> <h4 class="text-center text-lg-left">PyTutorials on YouTube</h4> <script src="https://apis.google.com/js/platform.js"></script> <div style="text-align: center"> <div class="g-ytsubscribe" data-channel="PrivateSplat" data-layout="full" data-count="default"></div> </div> </div> <div class="card p-3 mb-3 bg-light"> <h4 class="text-center text-lg-left">Recent Videos</h4> <div id="recent-yt-videos" class="yt_video_container"> <img src="https://img.youtube.com/vi/H8t4DJ3Tdrg/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=H8t4DJ3Tdrg', '_blank')"> <img src="https://img.youtube.com/vi/ksW59gYEl6Q/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=ksW59gYEl6Q', '_blank')"> <img src="https://img.youtube.com/vi/YPiHBtddefI/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=YPiHBtddefI', '_blank')"> <img src="https://img.youtube.com/vi/SQj17D1Q_6s/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=SQj17D1Q_6s', '_blank')"> <img src="https://img.youtube.com/vi/2kbeBzEQfXE/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=2kbeBzEQfXE', '_blank')"> <img src="https://img.youtube.com/vi/5JSloPGocSY/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=5JSloPGocSY', '_blank')"> </div> </div> <div class="card p-3 mb-3 bg-light"> <h4 class="text-center text-lg-left">Featured Sites</h4> <div class="featured-sites"> <a title="Emotionify" href="https://emotionify.nitratine.net/"> <img src="/static/img/featured-sites/emotionify.png" alt="Emotionify"> </a> <a title="Spotify Lyrics Viewer" href="https://spotify-lyrics-viewer.nitratine.net/"> <img src="/static/img/featured-sites/spotify-lyrics-viewer.png" alt="Spotify Lyrics Viewer"> </a> <a title="Hit Counter" href="https://hitcounter.pythonanywhere.com/"> <img src="/static/img/featured-sites/hit-counter.png" alt="Hit Counter"> </a> <a title="Monopoly Money" href="https://monopoly-money.nitratine.net/"> <img src="/posts/monopoly-money/banner.png" alt="Monopoly Money"> </a> </div> </div> </aside> </div> </main> <footer class="bg-dark py-4 px-1"> <div class="container"> <div class="d-flex justify-content-center"> <div class="top-group"> <div class="link-group"> <p class="header">Navigate</p> <a aria-current="page" class href="/">Home</a> <a href="/blog/">Blog</a> <a class="ml-2" href="/blog/categories/">Categories</a> <a class="ml-2" href="/blog/tags/">Tags</a> <a class="ml-2" href="/blog/archive/">Archive</a> <a href="/portfolio/">Portfolio</a> <a href="/about/">About</a> </div> <div class="link-group"> <p class="header">Popular Projects</p> <a href="/blog/post/auto-py-to-exe/">auto-py-to-exe</a> <a href="/blog/post/hit-counter/">hit-counter</a> <a href="/blog/post/whos-on-my-network/">whos-on-my-network</a> <a href="/blog/post/monopoly-money/">monopoly-money</a> </div> <div class="link-group"> <p class="header">Follow</p> <a href="https://github.com/brentvollebregt" class="with-icon"> <img src="/static/img/icons/github.svg" alt="GitHub Logo" style="filter: invert(1);"> GitHub </a> <a href="https://www.youtube.com/c/PyTutorials" class="with-icon"> <img src="/static/img/icons/youtube.svg" alt="YouTube Logo"> YouTube </a> <a href="/rss.xml" class="with-icon"><img src="/static/img/icons/rss.svg" alt="RSS Logo"> Nitratine RSS Feed </a> </div> </div> </div> <div class="mx-4"> <hr> </div> <p class="text-center m-0"> <small>Â© 2020 Brent Vollebregt</small> </p> </div> </footer> <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script> </body> </html>