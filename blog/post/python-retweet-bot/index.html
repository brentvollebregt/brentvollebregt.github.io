<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon" href="/static/img/favicon.ico">
        <link rel="icon" type="image/png" href="/static/img/favicon-384x384.png" sizes="384x384">
        <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png"><meta name="theme-color" content="#343a40"><link rel="canonical" href="https://nitratine.net/blog/post/python-retweet-bot/">
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for nitratine.net" href="/rss.xml">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="/static/css/base.css"><!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117153268-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-117153268-2');
        </script><!-- instant.page -->
        <script defer src="https://instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>

        

<title>Python Retweet Bot - Nitratine</title>
<link rel="stylesheet" href="/static/css/pygments.css">

<meta name="description" content="This bot retweets tweets in python. It looks for competitions which state you need to retweet and retweets them.">
<meta name="author" content="Brent Vollebregt">
<meta property="og:title" content="Python Retweet Bot">
<meta property="og:description" content="This bot retweets tweets in python. It looks for competitions which state you need to retweet and retweets them.">
<meta property="og:image" content="/posts/python-retweet-bot/feature.png">
<meta property="og:url" content="https://nitratine.net/blog/post/python-retweet-bot/">
<meta name="twitter:card" content="summary"><script data-ad-client="ca-pub-6407227183932047" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<link rel="stylesheet" href="/static/css/blog.css">

    </head>

    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <img src="/static/img/logo.png" width="145" height="30" class="d-inline-block align-top" alt="Brand Icon">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between" id="navbar">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item ">
                            <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/about/">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main role="main" class="container my-4">

            
 <div class="row">

    <div class="col-blog-content blog-main">
        
<h1 class="blog-post-title">Python Retweet Bot</h1>
<div class="mb-2">
    <a href="/blog/archive/#2018" class="text-muted">26 Jan 2018</a>
    <a href="/blog/categories/#Tutorials" class="badge badge-primary ml-2">Tutorials</a>
    
    <a href="/blog/tags/#python" class="badge badge-warning">python</a>
    
    <a href="/blog/tags/#bot" class="badge badge-warning">bot</a>
    
    <img src="https://hitcounternitratine.pythonanywhere.com/count/tag.svg?url=https%3A%2F%2Fnitratine.net%2Fblog%2Fpost%2Fpython-retweet-bot%2F" alt="Hits" class="post-hits">
</div>
<p class="lead">This bot retweets tweets in python. It looks for competitions which state you need to retweet and retweets them.</p>
<hr class="mt-3 mb-0">



<div class="post-content mt-3">
    <div class="toc">
<ul>
<li><a href="#what-and-why">What and Why?</a></li>
<li><a href="#setup">Setup</a></li>
<li><a href="#installing-tweepy">Installing Tweepy</a></li>
<li><a href="#getting-the-api-keys">Getting the API Keys</a></li>
<li><a href="#creating-the-script">Creating the Script</a></li>
<li><a href="#running-the-script">Running the Script</a></li>
<li><a href="#final-script">Final Script</a></li>
<li><a href="#final-notes">Final Notes</a></li>
</ul>
</div>
<h2 id="what-and-why">
<span style="position:relative"><a class="anchor" href="#what-and-why"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>What and Why?</span></h2>
<p>A while ago I had seen someone show all their winnings from using a twitter bot to retweet tweets. Today is a bit more advanced and now people ask to like, follow and sometimes tag. This bot does not tag others but it does retweet, like and follow people mentioned in the tweet.</p>
<h2 id="setup">
<span style="position:relative"><a class="anchor" href="#setup"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Setup</span></h2>
<p>First, make sure you have <a href="https://www.python.org/downloads/">python</a> installed and that you have <a href="/blog/post/how-to-setup-pythons-pip/">setup pip</a>.</p>
<p>If you haven't, create a new <a href="https://twitter.com/">twitter</a> account. If you want to use an existing one, be aware that this will spam the shit out of your account.</p>
<h2 id="installing-tweepy">
<span style="position:relative"><a class="anchor" href="#installing-tweepy"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installing Tweepy</span></h2>
<p>So now that you have set up pip, you can use it to install <a href="https://www.tweepy.org/">tweepy</a> easily. Open up cmd and execute the command <code>pip list tweepy</code>. Make sure the output doesn't have any errors and that it states that it was installed successfully.</p>
<p>Open up IDLE and execute the following line. If no errors appear, it was installed correctly.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">tweepy</span>
</code></pre></div>

<h2 id="getting-the-api-keys">
<span style="position:relative"><a class="anchor" href="#getting-the-api-keys"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Getting the API Keys</span></h2>
<p>Now we need to create a twitter app. This may put some people off but don't stop here, it's very little effort.</p>
<p>Go to <a href="https://apps.twitter.com/">https://apps.twitter.com/</a> and click "Create New App"</p>
<p><img alt="Create New App" src="/posts/python-retweet-bot/create-app.png" /></p>
<p>Fill in the form that is now provided and click "Create your Twitter application"</p>
<p><img alt="Create New App Form" src="/posts/python-retweet-bot/create-app2.png" /></p>
<p>Now go to the "Keys and Access Tokens" tab and find the following keys as shown in the image below:
- Consumer Key (API Key)
- Consumer Secret (API Secret)
- Access Token
- Access Token Secret</p>
<p><img alt="App tokens" src="/posts/python-retweet-bot/tokens.png" /></p>
<p>Save these somewhere for the next part of creating the bot.</p>
<h2 id="creating-the-script">
<span style="position:relative"><a class="anchor" href="#creating-the-script"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Creating the Script</span></h2>
<p>Now that everything is set up and we have the keys we need, we can make the script. Open IDLE, create a new script and save it as a .py.</p>
<p>First, we will want to import the tweepy module.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">tweepy</span>
</code></pre></div>

<p>Now we will want to enter the keys we got from the newly created twitter app. Save them in four separate variables as shown below. Make sure to use your own keys.</p>
<div class="codehilite"><pre><span></span><code><span class="n">consumer_key</span> <span class="o">=</span> <span class="s1">&#39;4z*********************oF&#39;</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s1">&#39;6P**********************************************3T&#39;</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="s1">&#39;79**********************************************nA&#39;</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s1">&#39;PS*****************************************dO&#39;</span>
</code></pre></div>

<p>Now we need to set up the twitter API by using OAuthHandler and API classes.</p>
<div class="codehilite"><pre><span></span><code><span class="n">auth</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>
</code></pre></div>

<p>Next, we will set two simple variables. One will hold different search queries and the other will be max tweets per query. These will be used later. You can freely modify these later after you understand what they do (noted in "Running the Script").</p>
<div class="codehilite"><pre><span></span><code><span class="n">queries</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rt to win&quot;</span><span class="p">,</span> <span class="s2">&quot;retweet to win&quot;</span><span class="p">]</span>
<span class="n">tweets_per_query</span>  <span class="o">=</span> <span class="mi">50</span>
</code></pre></div>

<p>Now set a variable to count the number of tweets re-tweeted to use at the end and create a loop looping through the queries declared previously.</p>
<div class="codehilite"><pre><span></span><code><span class="n">new_tweets</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">:</span>
</code></pre></div>

<p>In this for loop, print what query we are querying and then create another for loop that loops through tweets that are returned from the API search using the query in the current loop.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Starting new query: &quot;</span> <span class="o">+</span> <span class="n">query</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">tweet_mode</span><span class="o">=</span><span class="s2">&quot;extended&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">tweets_per_query</span> <span class="p">):</span>
</code></pre></div>

<p>Now inside this loop, we will focus on each individual tweet which is now in the 'tweet' variable.</p>
<p>Get the user's screen name that tweeted the tweet, id and then create and print the URL. This is mainly for output purposes but will be used later.</p>
<div class="codehilite"><pre><span></span><code><span class="n">user</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">screen_name</span>
<span class="nb">id</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">id</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://twitter.com/&#39;</span> <span class="o">+</span> <span class="n">user</span> <span class="o">+</span>  <span class="s1">&#39;/status/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div>

<p>Since we used the extended tweet_mode in the search query, we will be given all the text in the tweet rather than the normal 140 returned by the API.</p>
<p>This text will be sitting in tweet.retweeted_status.full_text if the tweet we are looking at is a re-tweeted tweet or in tweet.full_text if this is the original tweet. Convert the text to lowercase to make it easier to deal with later.</p>
<div class="codehilite"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">retweeted_status</span><span class="o">.</span><span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div>

<p>Now we want to look at the text content of the tweet to decided what we need to do.</p>
<p>If the tweet contains the terms "retweet" or "rt", we need to retweet the tweet. To do this we need to use the .retweet() method and then add 1 to new_tweets. An error will occur if we have already tweeted the tweet so we must account for that.</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="s2">&quot;retweet&quot;</span> <span class="ow">in</span> <span class="n">text</span> <span class="ow">or</span> <span class="s2">&quot;rt&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tweet</span><span class="o">.</span><span class="n">retweeted</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tweet</span><span class="o">.</span><span class="n">retweet</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Retweeted&quot;</span><span class="p">)</span>
            <span class="n">new_tweets</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Already Retweeted&#39;</span><span class="p">)</span>
</code></pre></div>

<p>If the tweet contains the terms "like" or "fav" we need to favorite the tweet. Twitter has now called this "liking" a tweet but in the API it is still called favorite. So still in the tweet for loop:</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="s2">&quot;like&quot;</span> <span class="ow">in</span> <span class="n">text</span> <span class="ow">or</span> <span class="s2">&quot;fav&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tweet</span><span class="o">.</span><span class="n">favorite</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;Liked&quot;</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Already Liked&#39;</span><span class="p">)</span>
</code></pre></div>

<p>If the tweet contains the term "follow" in it, we need to follow someone. Thankfully the API provides us with who is mentioned in the tweet so little work is done to extract people. Remember that some of these tweets will be re-tweeted tweets so we need to ignore the person that re-tweeted and get the original 'tweeter'. The following code should do the trick, using api.create_friendship to follow people.</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="s2">&quot;follow&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">to_follow</span> <span class="o">=</span> <span class="p">[</span><span class="n">tweet</span><span class="o">.</span><span class="n">retweeted_status</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">screen_name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;screen_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tweet</span><span class="o">.</span><span class="n">entities</span><span class="p">[</span><span class="s1">&#39;user_mentions&#39;</span><span class="p">]]</span>
        <span class="c1"># Don&#39;t follow origin user (person who retweeted)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">to_follow</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;screen_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tweet</span><span class="o">.</span><span class="n">entities</span><span class="p">[</span><span class="s1">&#39;user_mentions&#39;</span><span class="p">]]</span>

        <span class="k">for</span> <span class="n">screen_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">to_follow</span><span class="p">)):</span>
            <span class="n">api</span><span class="o">.</span><span class="n">create_friendship</span><span class="p">(</span><span class="n">screen_name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;Followed: &quot;</span> <span class="o">+</span> <span class="n">screen_name</span><span class="p">)</span>
</code></pre></div>

<p>Lastly print a friendly message at the end saying how many tweets we re-tweeted to show that the script is finished. This is outside all loops.</p>
<div class="codehilite"><pre><span></span><code><span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;New Tweets: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_tweets</span><span class="p">))</span>
</code></pre></div>

<h2 id="running-the-script">
<span style="position:relative"><a class="anchor" href="#running-the-script"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Running the Script</span></h2>
<p>To use this script, put queries you want to search for in the 'queries' list towards the top. Set tweets_per_query  to how many tweets per query you want to loop at; remember too many interactions with the API and you may get restricted access due to usage limits. Also going back too far with large queries could potentially be an issue.</p>
<p>Now simply run the script by hitting F5 in IDLE or double-clicking on the script. Wait and you should see what the script is up to until it's done.</p>
<h2 id="final-script">
<span style="position:relative"><a class="anchor" href="#final-script"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Script</span></h2>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">tweepy</span>

<span class="n">consumer_key</span> <span class="o">=</span> <span class="s1">&#39;4z*********************oF&#39;</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s1">&#39;6P**********************************************3T&#39;</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="s1">&#39;79**********************************************nA&#39;</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s1">&#39;PS*****************************************dO&#39;</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>

<span class="n">queries</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rt to win&quot;</span><span class="p">,</span> <span class="s2">&quot;retweet to win&quot;</span><span class="p">]</span>
<span class="n">tweets_per_query</span>  <span class="o">=</span> <span class="mi">50</span>

<span class="n">new_tweets</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Starting new query: &quot;</span> <span class="o">+</span> <span class="n">query</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Cursor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">tweet_mode</span><span class="o">=</span><span class="s2">&quot;extended&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">tweets_per_query</span> <span class="p">):</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">screen_name</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">id</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://twitter.com/&#39;</span> <span class="o">+</span> <span class="n">user</span> <span class="o">+</span>  <span class="s1">&#39;/status/&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">retweeted_status</span><span class="o">.</span><span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">full_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;retweet&quot;</span> <span class="ow">in</span> <span class="n">text</span> <span class="ow">or</span> <span class="s2">&quot;rt&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tweet</span><span class="o">.</span><span class="n">retweeted</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tweet</span><span class="o">.</span><span class="n">retweet</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Retweeted&quot;</span><span class="p">)</span>
                    <span class="n">new_tweets</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">except</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Already Retweeted&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;like&quot;</span> <span class="ow">in</span> <span class="n">text</span> <span class="ow">or</span> <span class="s2">&quot;fav&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tweet</span><span class="o">.</span><span class="n">favorite</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;Liked&quot;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Already Liked&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;follow&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">to_follow</span> <span class="o">=</span> <span class="p">[</span><span class="n">tweet</span><span class="o">.</span><span class="n">retweeted_status</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">screen_name</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;screen_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tweet</span><span class="o">.</span><span class="n">entities</span><span class="p">[</span><span class="s1">&#39;user_mentions&#39;</span><span class="p">]]</span>
               <span class="c1"># Don&#39;t follow origin user (person who retweeted)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">to_follow</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;screen_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tweet</span><span class="o">.</span><span class="n">entities</span><span class="p">[</span><span class="s1">&#39;user_mentions&#39;</span><span class="p">]]</span>

            <span class="k">for</span> <span class="n">screen_name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">to_follow</span><span class="p">)):</span>
                <span class="n">api</span><span class="o">.</span><span class="n">create_friendship</span><span class="p">(</span><span class="n">screen_name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s2">&quot;Followed: &quot;</span> <span class="o">+</span> <span class="n">screen_name</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;New Tweets: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_tweets</span><span class="p">))</span>
</code></pre></div>

<h2 id="final-notes">
<span style="position:relative"><a class="anchor" href="#final-notes"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Notes</span></h2>
<p>Unfortunately, I didn't add a "tag your friend" command because I didn't want to annoy anyone and didn't bother making another account. This could be a bit hard to implement because sometimes this is an arbitrary number requested.</p>
<p>I am not responsible for any harm that may come from this.</p>
</div>

<nav class="blog-pagination text-center mb-5 mt-4">
    
        <a class="btn btn-outline-primary mt-1" href="/blog/post/how-to-send-an-email-with-python/">&larr; How to Send an Email With Python</a>
    
    
        <a class="btn btn-outline-primary mt-1" href="/blog/post/python-auto-clicker/">Python Auto Clicker &rarr;</a>
    
</nav>


<div id="disqus_thread"></div>
<script>
    var disqus_config = function() {
        this.page.url = 'https://nitratine.net/blog/post/python-retweet-bot/'; // Your page's canonical URL variable
        this.page.identifier = 'https://nitratine.net/blog/post/python-retweet-bot/'; // Your page's unique identifier variable
    };
    (function() {
        var d = document,
            s = d.createElement('script');
        s.src = '//nitratine.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


    </div>

    <aside class="col-blog-sidebar blog-sidebar">

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">About</span>
            <p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTutorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and tools that help fix small things.</p>
        </div>

        <div class="input-group mb-3">
            <input id="sidebar-search" type="text" class="form-control" placeholder="Search" aria-label="Search">
            <div class="input-group-append">
                <button id="sidebar-search-submit" class="btn btn-outline-primary" type="button">Search</button>
            </div>
        </div>
        <script>let searchUrl = "/search/";</script>
        <script type="text/javascript" defer src="/static/js/search.js"></script>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Categories</span>
            <ol class="list-unstyled mb-0 text-center text-lg-left">
                
                    <li>
                    <a href="/blog/categories/#Apps">&#x1F4F1; Apps
                        <span class="badge badge-primary ml-3">2</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#General">&#x1F4F0; General
                        <span class="badge badge-primary ml-3">7</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Investigations">&#x1F50D; Investigations
                        <span class="badge badge-primary ml-3">2</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Projects">&#x1F4BE; Projects
                        <span class="badge badge-primary ml-3">15</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Snippets">&#x2702; Snippets
                        <span class="badge badge-primary ml-3">1</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Tools">&#x1F6E0; Tools
                        <span class="badge badge-primary ml-3">4</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#Tutorials">&#x1F4D6; Tutorials
                        <span class="badge badge-primary ml-3">25</span>
                    </a>
                </li>
                
                    <li>
                    <a href="/blog/categories/#YouTube">&#x1F3A5; YouTube
                        <span class="badge badge-primary ml-3">15</span>
                    </a>
                </li>
                
            </ol>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">PyTutorials on YouTube</span>
            <script src="https://apis.google.com/js/platform.js"></script>
            <div style="text-align: center">
                <div class="g-ytsubscribe" data-channel="PrivateSplat" data-layout="full" data-count="default"></div>
            </div>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Recent Videos</span>
            <div id="recent-yt-videos" class="yt_video_container">
                
                    <img src="https://img.youtube.com/vi/H8t4DJ3Tdrg/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=H8t4DJ3Tdrg', '_blank')">
                
                    <img src="https://img.youtube.com/vi/ksW59gYEl6Q/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=ksW59gYEl6Q', '_blank')">
                
                    <img src="https://img.youtube.com/vi/YPiHBtddefI/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=YPiHBtddefI', '_blank')">
                
                    <img src="https://img.youtube.com/vi/SQj17D1Q_6s/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=SQj17D1Q_6s', '_blank')">
                
                    <img src="https://img.youtube.com/vi/2kbeBzEQfXE/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=2kbeBzEQfXE', '_blank')">
                
                    <img src="https://img.youtube.com/vi/5JSloPGocSY/mqdefault.jpg" alt="Recent video thumbnail" onclick="window.open('https://www.youtube.com/watch?v=5JSloPGocSY', '_blank')">
                
            </div>
        </div>

        <div class="card p-3 mb-3 bg-light">
            <span class="h4 text-center text-lg-left">Featured Sites</span>
            <div class="featured-sites">
                
                    <a title="Emotionify" href="https://emotionify.nitratine.net/">
                        <img src="/static/img/featured-sites/emotionify.png" alt="Emotionify" />
                    </a>
                
                    <a title="Spotify Lyrics Viewer" href="https://spotify-lyrics-viewer.nitratine.net/">
                        <img src="/static/img/featured-sites/spotify-lyrics-viewer.png" alt="Spotify Lyrics Viewer" />
                    </a>
                
                    <a title="Hit Counter" href="https://hitcounter.pythonanywhere.com/">
                        <img src="/static/img/featured-sites/hit-counter.png" alt="Hit Counter" />
                    </a>
                
                    <a title="Monopoly Money" href="https://monopoly-money.nitratine.net/">
                        <img src="/posts/monopoly-money/banner.png" alt="Monopoly Money" />
                    </a>
                
            </div>
        </div>
    </aside>

</div>


        </main>

        <footer class="bg-dark py-4 px-1">
            <div class="container">
                <div class="d-flex justify-content-center">
                    <div class="top-group">
                        <div class="link-group">
                            <p class="header">Navigate</p>
                            <a aria-current="page" class="" href="/">Home</a>
                            <a href="/blog/">Blog</a>
                            <a class="ml-2" href="/blog/categories/">Categories</a>
                            <a class="ml-2" href="/blog/tags/">Tags</a>
                            <a class="ml-2" href="/blog/archive/">Archive</a>
                            <a href="/portfolio/">Portfolio</a>
                            <a href="/about/">About</a>
                        </div>

                        <div class="link-group">
                            <p class="header">Popular Projects</p>
                            <a href="/blog/post/auto-py-to-exe/">auto-py-to-exe</a>
                            <a href="/blog/post/hit-counter/">hit-counter</a>
                            <a href="/blog/post/whos-on-my-network/">whos-on-my-network</a>
                            <a href="/blog/post/monopoly-money/">monopoly-money</a>
                        </div>

                        <div class="link-group">
                            <p class="header">Follow</p>
                            <a href="https://github.com/brentvollebregt" class="with-icon">
                                <img src="/static/img/icons/github.svg" alt="GitHub Logo" style="filter: invert(1);" />
                                GitHub
                            </a>
                            <a href="https://www.youtube.com/c/PyTutorials" class="with-icon">
                                <img src="/static/img/icons/youtube.svg" alt="YouTube Logo" />
                                YouTube
                            </a>
                            <a rel="alternate" type="application/rss+xml" href="/rss.xml" class="with-icon">
                                <img src="/static/img/icons/rss.svg" alt="RSS Logo"/>
                                Nitratine RSS Feed
                            </a>
                        </div>
                    </div>
                </div>

                <div class="mx-4">
                    <hr/>
                </div>

                <p class="text-center m-0">
                    <small>Â© 2020 Brent Vollebregt</small>
                </p>
            </div>
        </footer>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    </body>
</html>